(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(24)},21:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(11),o=a.n(r),c=a(12),l=a(2),m=a.n(l),i=a(1),u=a(8),d=a(3),p=a(4),h=a(6),f=a(5),C=a(7),v=(a(21),a(13)),b=a.n(v),E=function(){var e=Object(u.a)(m.a.mark(function e(t){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();E.PropTypes={url:b.a.string};var g=E,j=function(e){var t=e.name,a=e.email,n=e.address,r=e.title,o=e.body;return s.a.createElement("div",{className:"post"},s.a.createElement("div",{className:"postUp"},s.a.createElement("div",{className:"author"},t),s.a.createElement("div",{className:"author"},a)),s.a.createElement("div",{className:"postTitle"},s.a.createElement("h1",null,r)),s.a.createElement("div",{className:"postBody"},s.a.createElement("p",{className:"postText"},o)),s.a.createElement("div",{className:"postFooter"},s.a.createElement("div",{className:"author"},"Come and get me sucker ---"),s.a.createElement("div",{className:"author"},"Here is my IRL address!!!"),s.a.createElement("div",{className:"author"},"--- ",n.zipcode,",\xa0",n.city,",\xa0",n.street," str.,\xa0",n.suite)))},O=function(e){return s.a.createElement("div",{className:"comment"},e.body,s.a.createElement("div",{className:"cmntAuthor"},s.a.createElement("div",{className:"author"},e.name),s.a.createElement("div",{className:"author"},e.email)))},N=a(9),y=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).setChanges=function(e,t){var n=e.target.value,s=String(n);switch(t){case"name":s=s.replace(/[^\w\u0410-\u042f\u0430-\u044f\u0401\u0451 .-]/g,"");break;case"email":s=s.replace(/[^\w@.-_]/g,"");break;default:s=s.replace(/[`]/g,"")}a.setState(function(e){return Object(N.a)({},t,s)})},a.state={name:"",email:"",comment:""},a}return Object(C.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("form",null,s.a.createElement("fieldset",null,s.a.createElement("legend",null,"add Your Comment here"),s.a.createElement("div",{className:"formDiv"},s.a.createElement("label",null,"Your Name:",s.a.createElement("input",{type:"text",placeholder:"Enter name here",value:this.state.name,onChange:function(t){return e.setChanges(t,"name")}})),"\xa0 \xa0 \xa0 \xa0 \xa0",s.a.createElement("label",null,"Your e-mail:",s.a.createElement("input",{type:"email",placeholder:"Enter e-mail here",value:this.state.email,onChange:function(t){return e.setChanges(t,"email")}}))),s.a.createElement("div",{className:"formDiv"},s.a.createElement("label",null,"Comment:",s.a.createElement("textarea",{cols:"60",rows:"3",value:this.state.comment,onChange:function(t){return e.setChanges(t,"comment")}}))),s.a.createElement("div",{className:"formDiv"},s.a.createElement("button",{onClick:function(t){return t.preventDefault(),e.props.handleClose()}},"Cancel"),"\xa0 \xa0 \xa0 \xa0 \xa0",s.a.createElement("button",{onClick:function(t){return t.preventDefault(),e.props.addComment(e.props.postId,e.state.name,e.state.email,e.state.comment)}},"Submit"))))}}]),t}(s.a.Component),S=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).rerander=function(){a.props.changeStatus>a.state.changeStatus&&(a.setState({postsUserComments:Object(i.a)(a.props.postList),filteredPosts:Object(i.a)(a.props.postList),changeStatus:a.props.changeStatus}),a.handleCommentFormClose())},a.addVisibleComment=function(e){var t=Object(i.a)(a.state.visibleComments),n=t.findIndex(function(t){return t===e});n>=0?t.splice(n,1):t.push(e),a.setState({visibleComments:Object(i.a)(t)})},a.filterPosts=function(e){var t=e.target.value;a.setState(function(e){return{searchPostString:t,filteredPosts:e.postsUserComments.filter(function(e){return e.title.toLowerCase().includes(t.toLowerCase())||e.body.toLowerCase().includes(t.toLowerCase())})}})},a.handleCommentFormClose=function(){return a.setState({commentingPostId:null})},a.state={postsUserComments:Object(i.a)(a.props.postList),filteredPosts:Object(i.a)(a.props.postList),visibleComments:[],searchPostString:"",commentingPostId:null,changeStatus:0},a}return Object(C.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return this.rerander(),s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",null,"Instantly Dynamic list of ",this.state.filteredPosts.length," posts was Loaded"),s.a.createElement("input",{type:"text",placeholder:"Search for Post",value:this.state.searchPostString,onChange:this.filterPosts}),this.state.filteredPosts.map(function(t){return s.a.createElement("article",null,s.a.createElement(j,{name:t.user.name,email:t.user.email,address:t.user.address,title:t.title,body:t.body}),s.a.createElement("div",{className:"cmntsN"},s.a.createElement("div",{className:"cmntsAdd",onClick:function(){return e.setState({commentingPostId:t.id})}},s.a.createElement("b",null,"Add new Comment")),s.a.createElement("div",{className:"cmntsShow",onClick:function(){return e.addVisibleComment(t.id)}},s.a.createElement("b",null,e.state.visibleComments.includes(t.id)?"----- Close Comments":"----- View ".concat(t.comments.length," comments")))),e.state.commentingPostId===t.id&&s.a.createElement(y,{postId:t.id,addComment:e.props.addCommentHandler,handleClose:e.handleCommentFormClose}),e.state.visibleComments.includes(t.id)&&t.comments.map(function(e){return O(e)}))}))}}]),t}(s.a.Component),w=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(f.a)(t).call(this))).handleLoadBTNClick=Object(u.a)(m.a.mark(function t(){var a,n,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loadBTN:"Loading ..."}),t.next=3,g("https://jsonplaceholder.typicode.com/users");case 3:return a=t.sent,t.next=6,g("https://jsonplaceholder.typicode.com/posts");case 6:return n=t.sent,t.next=9,g("https://jsonplaceholder.typicode.com/comments");case 9:return s=t.sent,t.next=12,e.setState({posts:Object(i.a)(n),users:Object(i.a)(a),comments:Object(i.a)(s),lastCommentId:s.map(function(e){return e.id}).sort(function(e,t){return e.id-t.id})[s.length-1]});case 12:e.createPUCArray(),e.setState({loadBTN:"Loaded"});case 14:case"end":return t.stop()}},t)})),e.createPUCArray=function(){var t=e.state.posts.map(function(t){return Object(c.a)({},t,{user:e.state.users.find(function(e){return e.id===t.userId}),comments:e.state.comments.filter(function(e){return e.postId===t.id}).reverse()})});e.setState(function(e){return{changeStatus:e.changeStatus+1,postsUserComments:Object(i.a)(t)}})},e.addComment=function(){var t=Object(u.a)(m.a.mark(function t(a,n,s,r){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState(function(e){return{comments:[].concat(Object(i.a)(e.comments),[{postId:a,id:e.lastCommentId+1,name:n,email:s,body:r}]),lastCommentId:e.lastCommentId+1}});case 2:e.createPUCArray();case 3:case"end":return t.stop()}},t)}));return function(e,a,n,s){return t.apply(this,arguments)}}(),e.state={postsUserComments:[],users:[],posts:[],comments:[],lastCommentId:0,loadBTN:"!!! Load !!!",changeStatus:0},e}return Object(C.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},"Loaded"!==this.state.loadBTN?s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",null,"Dynamic list of posts"),s.a.createElement("button",{onClick:this.handleLoadBTNClick},this.state.loadBTN)):s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",null,"Once upon a time in a very ancient",s.a.createElement("br",null),"and extremely outdated forum ",s.a.createElement("br",null),"that no one has visited for decades ...",s.a.createElement("br",null),"or even centuries..."),s.a.createElement(S,{postList:this.state.postsUserComments,addCommentHandler:this.addComment,changeStatus:this.state.changeStatus})))}}]),t}(s.a.Component);o.a.render(s.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.b16a3311.chunk.js.map